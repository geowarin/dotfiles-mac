

Problem:
No hardware acceleration

Symptoms:

```
‚ùØ inxi -G  

Says somthing like FAILED: NVIDIA
```

Possibly 

```
less /var/log/Xorg.0.log

  [     3.083] (II) Loading sub module "glxserver_nvidia"
  [     3.083] (II) LoadModule: "glxserver_nvidia"
  [     3.083] (WW) Warning, couldn't open module glxserver_nvidia
* [     3.083] (EE) NVIDIA: Failed to load module "glxserver_nvidia" (module does not exist, 0)
* [     3.083] (EE) NVIDIA(0): Failed to initialize the GLX module; please check in your X
  [     3.083] (EE) NVIDIA(0):     log file that the GLX module has been loaded in your X
  [     3.083] (EE) NVIDIA(0):     server, and that the module is the NVIDIA GLX module.  If
  [     3.083] (EE) NVIDIA(0):     you continue to encounter problems, Please try
  [     3.083] (EE) NVIDIA(0):     reinstalling the NVIDIA driver.
  [     3.083] (II) NVIDIA: The X server does not support PRIME Render Offload.
```

if restarting the display manager (ie, lightdm) with

```
sudo systemctl restart display-manager
```

fixes the problem, then we need to load the nvidia kernel module early.

```
sudo nano /etc/mkinitcpio.conf

MODULES="nvidia"

sudo mkinitcpio -P
```

(as explained here: https://endeavouros.com/docs/hardware-and-network/graphic-cards-gpu-driver-and-setup/nvidia/nvidia-optional-enhancements-and-troubleshooting/)

Problem:
Second monitor not detected

Solution:

```
Section "Monitor"
    # HorizSync source: edid, VertRefresh source: edid
    Identifier     "DP-2"
    VendorName     "Unknown"
    ModelName      "LG Electronics LG QHD"
    HorizSync       30.0 - 230.0
    VertRefresh     50.0 - 144.0
    Option         "DPMS"
    Option      "Primary" "true"
EndSection

Section "Monitor"
    # HorizSync source: edid, VertRefresh source: edid
    Identifier     "HDMI-0"
    VendorName     "Unknown"
    ModelName      "DELL U2414H"
    HorizSync       30.0 - 83.0
    VertRefresh     56.0 - 76.0
    Option         "DPMS"
    Option      "RightOf" "DP-2"
EndSection
```


Problem:
Screen tearing

Solution:
Use nvidia-utils to create xorg conf

put in `~/.xprofile`:

```
nvidia-settings --load-config-only
```

`/etc/X11/xorg.conf.d/95-nvidia.conf`:

```conf
# nvidia-settings: X configuration file generated by nvidia-settings
# nvidia-settings:  version 460.27.04

Section "ServerLayout"
    Identifier     "Layout0"
    Screen      0  "Screen0" 0 0
    InputDevice    "Keyboard0" "CoreKeyboard"
    InputDevice    "Mouse0" "CorePointer"
    Option         "Xinerama" "0"
EndSection

Section "Files"
EndSection

Section "Module"
    Load           "dbe"
    Load           "extmod"
    Load           "type1"
    Load           "freetype"
    Load           "glx"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Mouse0"
    Driver         "mouse"
    Option         "Protocol" "auto"
    Option         "Device" "/dev/psaux"
    Option         "Emulate3Buttons" "no"
    Option         "ZAxisMapping" "4 5"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Keyboard0"
    Driver         "kbd"
EndSection

Section "Monitor"
    # HorizSync source: edid, VertRefresh source: edid
    Identifier     "Monitor0"
    VendorName     "Unknown"
    ModelName      "LG Electronics LG QHD"
    HorizSync       30.0 - 230.0
    VertRefresh     50.0 - 144.0
    Option         "DPMS"
EndSection

Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
    BoardName      "GeForce RTX 2080 Ti"
EndSection

Section "Screen"
    Identifier     "Screen0"
    Device         "Device0"
    Monitor        "Monitor0"
    DefaultDepth    24
    Option         "Stereo" "0"
    Option         "nvidiaXineramaInfoOrder" "DFP-3"
    Option         "metamodes" "DP-2: 2560x1440_144 +0+0 {ForceCompositionPipeline=On, ForceFullCompositionPipeline=On}, HDMI-0: nvidia-auto-select +2560+100"
    Option         "SLI" "Off"
    Option         "MultiGPU" "Off"
    Option         "BaseMosaic" "off"
    SubSection     "Display"
        Depth       24
    EndSubSection
EndSection
```